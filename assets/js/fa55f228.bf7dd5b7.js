"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[979],{4137:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},v=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(n),v=r,m=u["".concat(s,".").concat(v)]||u[v]||d[v]||i;return n?a.createElement(m,o(o({ref:t},c),{},{components:n})):a.createElement(m,o({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=v;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}v.displayName="MDXCreateElement"},4614:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var a=n(7462),r=(n(7294),n(4137));const i={},o="Managing Events",l={unversionedId:"Configuration/events",id:"Configuration/events",title:"Managing Events",description:"The OpenAI Proxy Service supports multiple events. Each event has a unique EventCode. The EventCode is used to identify the event when calling the proxy service.",source:"@site/docs/30-Configuration/30-events.md",sourceDirName:"30-Configuration",slug:"/Configuration/events",permalink:"/azure-openai-service-proxy/Configuration/events",draft:!1,editUrl:"https://github.com/gloveboxes/azure-openai-service-proxy/tree/master/docs/docs/30-Configuration/30-events.md",tags:[],version:"current",sidebarPosition:30,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Managing Rate limits",permalink:"/azure-openai-service-proxy/Configuration/openai-rate-limits"},next:{title:"The Playground",permalink:"/azure-openai-service-proxy/playground"}},s={},p=[{value:"The Management API",id:"the-management-api",level:2},{value:"Adding events",id:"adding-events",level:2},{value:"Listing events",id:"listing-events",level:2},{value:"List all events",id:"list-all-events",level:3},{value:"List active events",id:"list-active-events",level:3},{value:"Event Code Cache",id:"event-code-cache",level:2}],c={toc:p},u="wrapper";function d(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"managing-events"},"Managing Events"),(0,r.kt)("p",null,"The OpenAI Proxy Service supports multiple events. Each event has a unique ",(0,r.kt)("inlineCode",{parentName:"p"},"EventCode"),". The ",(0,r.kt)("inlineCode",{parentName:"p"},"EventCode")," is used to identify the event when calling the proxy service."),(0,r.kt)("h2",{id:"the-management-api"},"The Management API"),(0,r.kt)("p",null,"There is a Management API for adding events and listing events. The API is secured with a Management ID token. The Management ID token is stored in the Azure Storage Account ",(0,r.kt)("inlineCode",{parentName:"p"},"management")," table. The ",(0,r.kt)("inlineCode",{parentName:"p"},"management")," table is created when the proxy service is deployed and started."),(0,r.kt)("p",null,"For now, the only way to manage events is via the Management API. In the future, there may be a web UI for managing events."),(0,r.kt)("h2",{id:"adding-events"},"Adding events"),(0,r.kt)("p",null,"The following is an example of a ",(0,r.kt)("inlineCode",{parentName:"p"},"cURL")," command to add an event to the system."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer YOUR_MANAGEMENT_ID_TOKEN" -d \'{\n    "event_name": ".NET OpenAI Hack",\n    "start_utc" : "2023-11-16T00:00:00",\n    "end_utc": "2023-12-16T00:00:00",\n    "max_token_cap": 2048,\n    "event_url": "http://www.example.com/event_name",\n    "event_url_text": "Join the .NET OpenAI Hack",\n    "organizer_name": "Ant Blogs",\n    "organizer_email": "ablogs@example.com"\n}\' https://YOUR_OPENAI_PROXY_ENDPOINT/api/v1/management/addevent | jq\n')),(0,r.kt)("h2",{id:"listing-events"},"Listing events"),(0,r.kt)("p",null,"For now, you can list all events or all active events."),(0,r.kt)("h3",{id:"list-all-events"},"List all events"),(0,r.kt)("p",null,"The following is an example of a ",(0,r.kt)("inlineCode",{parentName:"p"},"cURL")," command to list all events in the system."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl -X GET -H "Authorization: Bearer YOUR_MANAGEMENT_ID_TOKEN" https://YOUR_OPENAI_PROXY_ENDPOINT/api/v1/management/listevents/all | jq\n')),(0,r.kt)("h3",{id:"list-active-events"},"List active events"),(0,r.kt)("p",null,"An active event is an event where the current UTC time is is between the event ",(0,r.kt)("inlineCode",{parentName:"p"},"StartUTC")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"EndUTC")," times and the event is active. The API is secured with a Management ID token. The Management ID token is stored in the Azure Storage Account ",(0,r.kt)("inlineCode",{parentName:"p"},"management")," table. The ",(0,r.kt)("inlineCode",{parentName:"p"},"management")," table is created when the proxy service is deployed and started."),(0,r.kt)("p",null,"The following is an example of a ",(0,r.kt)("inlineCode",{parentName:"p"},"cURL")," command to list all active events in the system."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl -X GET -H "Authorization: Bearer YOUR_MANAGEMENT_ID_TOKEN" YOUR_OPENAI_PROXY_ENDPOINT/api/v1/management/listevents/active | jq\n')),(0,r.kt)("h2",{id:"event-code-cache"},"Event Code Cache"),(0,r.kt)("p",null,"Event data, namely the ",(0,r.kt)("inlineCode",{parentName:"p"},"EventCode"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"StartUTC"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"EndUTC"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"MaxTokenCap")," are cached by the proxy service. The cache is refreshed every 10 minutes. Caching is implemented to improve performance by reducing the number of calls to the Azure Storage Account table. Because of caching, it may take up to 10 minutes for the changes to be reflected in the proxy service."))}d.isMDXComponent=!0}}]);