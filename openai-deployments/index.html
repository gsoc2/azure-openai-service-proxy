<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-openai-deployments" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">OpenAI model deployments | Azure OpenAI Proxy Service</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://gloveboxes.github.io/azure-openai-service-proxy/openai-deployments/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="OpenAI model deployments | Azure OpenAI Proxy Service"><meta data-rh="true" name="description" content="From the Azure Portal, select the Azure OpenAI resource, then select the Deployments tab, and finally select Create deployment. Enter a friendly name for the deployment, and select the model and the capacity. The capacity is the number of requests per minute. The capacity can be changed at any time. The deployment will take a few minutes to provision."><meta data-rh="true" property="og:description" content="From the Azure Portal, select the Azure OpenAI resource, then select the Deployments tab, and finally select Create deployment. Enter a friendly name for the deployment, and select the model and the capacity. The capacity is the number of requests per minute. The capacity can be changed at any time. The deployment will take a few minutes to provision."><link data-rh="true" rel="icon" href="/azure-openai-service-proxy/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://gloveboxes.github.io/azure-openai-service-proxy/openai-deployments/"><link data-rh="true" rel="alternate" href="https://gloveboxes.github.io/azure-openai-service-proxy/openai-deployments/" hreflang="en"><link data-rh="true" rel="alternate" href="https://gloveboxes.github.io/azure-openai-service-proxy/openai-deployments/" hreflang="x-default"><script>!function(t,e,n,a,c,r,s){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(r=e.createElement(a)).async=1,r.src="https://www.clarity.ms/tag/jo0nppwdka",(s=e.getElementsByTagName(a)[0]).parentNode.insertBefore(r,s)}(window,document,"clarity","script")</script><link rel="stylesheet" href="/azure-openai-service-proxy/assets/css/styles.da8f80c8.css">
<link rel="preload" href="/azure-openai-service-proxy/assets/js/runtime~main.57ddf93f.js" as="script">
<link rel="preload" href="/azure-openai-service-proxy/assets/js/main.4e15f7e7.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/azure-openai-service-proxy/"><div class="navbar__logo"><img src="/azure-openai-service-proxy/img/Azure-OpenAI-Services.svg" alt="Azure OpenAI Proxy Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/azure-openai-service-proxy/img/Azure-OpenAI-Services.svg" alt="Azure OpenAI Proxy Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Azure OpenAI Proxy Service</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/azure-openai-service-proxy/">Azure OpenAI Proxy Service</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/azure-openai-service-proxy/category/service-installation/">Service installation</a><button aria-label="Toggle the collapsible sidebar category &#x27;Service installation&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/azure-openai-service-proxy/playground-installation/">Playground installation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/azure-openai-service-proxy/category/authorization/">Authorization</a><button aria-label="Toggle the collapsible sidebar category &#x27;Authorization&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/azure-openai-service-proxy/openai-deployments/">OpenAI model deployments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/azure-openai-service-proxy/playground/">Using the Playground</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/azure-openai-service-proxy/category/developer-endpoints/">Developer endpoints</a><button aria-label="Toggle the collapsible sidebar category &#x27;Developer endpoints&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/azure-openai-service-proxy/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">OpenAI model deployments</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>OpenAI model deployments</h1><p>From the Azure Portal, select the Azure OpenAI resource, then select the <code>Deployments</code> tab, and finally select <code>Create deployment</code>. Enter a friendly name for the deployment, and select the model and the capacity. The capacity is the number of requests per minute. The capacity can be changed at any time. The deployment will take a few minutes to provision.</p><p>Make a note of the following as you&#x27;ll need them for the next step:</p><ol><li>The <code>Deployment name</code>.</li><li>The <code>Service location</code>.</li><li>The <code>Endpoint key</code>.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-the-azure-openai-deployments">Configuring the Azure OpenAI deployments<a href="#configuring-the-azure-openai-deployments" class="hash-link" aria-label="Direct link to Configuring the Azure OpenAI deployments" title="Direct link to Configuring the Azure OpenAI deployments">​</a></h2><p>The proxy service is designed to load balance across multiple Azure OpenAI deployments. The deployment configuration is loaded from the &#x27;configuration&#x27; Azure Storage Account table. The table has the following schema:</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>PartitionKey</td><td>string</td><td>Can be &#x27;openai-chat&#x27;, &#x27;openai-completions&#x27;, or &#x27;openai-embeddings&#x27;</td></tr><tr><td>RowKey</td><td>string</td><td>The deployment-friendly name</td></tr><tr><td>EndpointKey</td><td>string</td><td>The Azure OpenAI deployment key</td></tr><tr><td>DeploymentName</td><td>string</td><td>The Azure OpenAI deployment name</td></tr><tr><td>Active</td><td>boolean</td><td>Is the deployment active, true, or false</td></tr></tbody></table><p>Here is an example</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PartitionKey: openai-chat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RowKey: gpt-35-turbo-01</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EndpointKey: wd7w6d77w868sd678s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DeploymentName: gpt-35-turbo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Active: true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Ideally, the deployments should be similar TPM (Tokens Per Minute) capacity. The proxy service will load balance across the deployments using a simple <a href="https://en.wikipedia.org/wiki/Round-robin_scheduling" target="_blank" rel="noopener noreferrer">round robin</a> scheduler. The proxy service will only load balance across active deployments. If there are no active deployments, the proxy service will return a <code>500</code> service unavailable error.</p><p>If one deployment is of greater capacity than another, you can add the deployment to the configuration table multiple times. For example, if you have one deployment with a capacity of 600K requests per minute, and another deployment of 300. Add the 600K deployment to the configuration table twice so it will be called twice as often as the smaller deployment.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/gloveboxes/azure-openai-service-proxy/tree/master/docs/docs/40-openai-deployments.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/azure-openai-service-proxy/Authorization/adding-event/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">The Management API</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/azure-openai-service-proxy/playground/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Using the Playground</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#configuring-the-azure-openai-deployments" class="table-of-contents__link toc-highlight">Configuring the Azure OpenAI deployments</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Azure OpenAI Proxy Service - Azure OpenAI Community Events Made Easy. Built with Docusaurus.</div></div></div></footer></div>
<script src="/azure-openai-service-proxy/assets/js/runtime~main.57ddf93f.js"></script>
<script src="/azure-openai-service-proxy/assets/js/main.4e15f7e7.js"></script>
</body>
</html>